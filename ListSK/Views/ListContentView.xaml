<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:ListSK.Models"
             x:Class="ListSK.Views.ListContentView"
             x:DataType="models:ProductModel">
    <Frame
           BorderColor="Blue"
           
           Margin="10">

        <Frame.Triggers>
            <DataTrigger TargetType="Frame"
                         Binding="{Binding IsOptional}"
                         Value="True">
                <Setter Property="BorderColor" Value="Red"/>
            </DataTrigger>

            <DataTrigger TargetType="Frame"
                         Binding="{Binding IsBought}"
                         Value="True">
                <Setter Property="Opacity" Value="0.5"/>
                <Setter Property="BorderColor" Value="Green"/>
            </DataTrigger>
        </Frame.Triggers>
        
        

        <Grid ColumnDefinitions="Auto,2*,*,*,Auto,Auto" RowDefinitions="*,Auto" Margin="10">
            <CheckBox IsChecked="{Binding IsBought, Mode=TwoWay}"/>
            <Label Text="{Binding Name}" FontSize="Medium" Grid.Column="1" VerticalOptions="Center"/>
            <Entry Text="{Binding Amount}" Grid.Column="2" WidthRequest="50" FontSize="Medium" VerticalOptions="Center"/>
            <Label Text="{Binding Unit}" Grid.Column="3" FontSize="Medium" VerticalOptions="Center"/>
            <Label Text="{Binding Category}" Grid.Column="4" FontSize="Medium" VerticalOptions="Center"/>
            <Label Text="{Binding Shop}" Grid.Column="1" Grid.Row="1" FontSize="Small" VerticalOptions="Center"/>

            <Button Text="-" Grid.Column="2" Grid.Row="1" VerticalOptions="Center" WidthRequest="10" HeightRequest="10" Command="{Binding Path=BindingContext.DecrementCommand,Source={RelativeSource AncestorType={x:Type ContentPage}}}" CommandParameter="{Binding}"/>
            <Button Text="+" Grid.Column="3" Grid.Row="1" VerticalOptions="Center" WidthRequest="10" HeightRequest="10" Command="{Binding Path=BindingContext.IncrementCommand,Source={RelativeSource AncestorType={x:Type ContentPage}}}" CommandParameter="{Binding}"/>
            <Label Text="Produkt opcjonalny" Grid.Column="4" Grid.Row="1" VerticalOptions="Center" IsVisible="{Binding IsOptional}">
            </Label>

            <FlyoutBase.ContextFlyout>
                <MenuFlyout>
                    <MenuFlyoutItem Text="UsuÅ„ produkt"
                        Command="{Binding Path=BindingContext.RemoveProductCommand, Source={RelativeSource AncestorType={x:Type ContentPage}}}"
                        CommandParameter="{Binding}"/>
                </MenuFlyout>
            </FlyoutBase.ContextFlyout>
        </Grid>
    </Frame>
</ContentView>
